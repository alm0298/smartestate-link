<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SmartEstate Link</title>
    <meta name="description" content="Property management and analysis tool" />
    <meta name="author" content="SmartEstate" />
    <meta property="og:image" content="/smartestate-link/og-image.png" />
    
    <!-- Start Single Page Apps for GitHub Pages -->
    <script type="text/javascript">
      // Single Page Apps for GitHub Pages
      // MIT License
      // https://github.com/rafgraph/spa-github-pages
      (function(l) {
        if (l.search[1] === '/' ) {
          var decoded = l.search.slice(1).split('&').map(function(s) { 
            return s.replace(/~and~/g, '&')
          }).join('?');
          window.history.replaceState(null, null,
              l.pathname.slice(0, -1) + decoded + l.hash
          );
        }
      }(window.location))
    </script>
    <!-- End Single Page Apps for GitHub Pages -->
    <style>
      /* Fallback styles in case the app doesn't load */
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 20px;
        line-height: 1.6;
      }
      .container {
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        border: 1px solid #ddd;
        border-radius: 5px;
      }
      h1 {
        color: #333;
      }
      .error {
        color: red;
        font-weight: bold;
      }
      .success {
        color: green;
        font-weight: bold;
      }
    </style>
    
    <!-- Load React from CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
  </head>

  <body>
    <div id="root">
      <div class="container">
        <h1>SmartEstate Link</h1>
        <p>Loading application...</p>
        <p>If you see this message for more than a few seconds, there might be an issue loading the application.</p>
      </div>
    </div>
    
    <!-- Inline React Component -->
    <script type="text/babel">
      const { useState, useEffect } = React;
      
      function App() {
        const [count, setCount] = useState(0);
        
        useEffect(() => {
          console.log("App mounted successfully");
        }, []);
        
        return (
          <div style={{ 
            fontFamily: 'Arial, sans-serif',
            maxWidth: '800px',
            margin: '0 auto',
            padding: '20px'
          }}>
            <header style={{ 
              backgroundColor: '#333',
              color: 'white',
              padding: '20px',
              marginBottom: '20px',
              borderRadius: '5px'
            }}>
              <h1>SmartEstate Link</h1>
              <p>Property Management System</p>
            </header>

            <div style={{ 
              backgroundColor: '#f5f5f5',
              padding: '20px',
              borderRadius: '5px',
              marginBottom: '20px'
            }}>
              <h2>React Application is Working!</h2>
              <p>This is a simplified version of the application that doesn't require authentication.</p>
              <p>
                <button 
                  onClick={() => setCount(count + 1)}
                  style={{
                    backgroundColor: '#4CAF50',
                    color: 'white',
                    border: 'none',
                    padding: '10px 20px',
                    borderRadius: '4px',
                    cursor: 'pointer'
                  }}
                >
                  Count: {count}
                </button>
              </p>
            </div>

            <div style={{ 
              border: '1px solid #ddd',
              borderRadius: '5px',
              padding: '20px',
              marginBottom: '20px'
            }}>
              <h2>Sample Properties</h2>
              {[
                { id: 1, address: '123 Main St', price: '$350,000', type: 'Single Family' },
                { id: 2, address: '456 Oak Ave', price: '$425,000', type: 'Townhouse' },
                { id: 3, address: '789 Pine Rd', price: '$550,000', type: 'Condo' }
              ].map(property => (
                <div key={property.id} style={{ 
                  border: '1px solid #ddd',
                  borderRadius: '5px',
                  padding: '15px',
                  marginBottom: '10px'
                }}>
                  <h3>{property.address}</h3>
                  <p>Price: {property.price}</p>
                  <p>Type: {property.type}</p>
                  <button
                    style={{
                      backgroundColor: '#2196F3',
                      color: 'white',
                      border: 'none',
                      padding: '8px 16px',
                      borderRadius: '4px',
                      cursor: 'pointer'
                    }}
                  >
                    View Details
                  </button>
                </div>
              ))}
            </div>

            <footer style={{ 
              textAlign: 'center',
              padding: '20px',
              borderTop: '1px solid #ddd',
              marginTop: '20px'
            }}>
              <p>SmartEstate Link &copy; 2025</p>
            </footer>
          </div>
        );
      }
      
      try {
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
        console.log('React app rendered successfully');
      } catch (error) {
        console.error('Error rendering React app:', error);
        document.getElementById('root').innerHTML = `
          <div style="color: red; padding: 20px; border: 1px solid #f44336; margin: 20px;">
            <h2>Error Rendering Application</h2>
            <p>${error.message}</p>
            <pre>${error.stack}</pre>
          </div>
        `;
      }
    </script>
  </body>
</html>
