<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SmartEstate Link</title>
    <meta name="description" content="Property management and analysis tool" />
    <meta name="author" content="SmartEstate" />
    <meta property="og:image" content="/og-image.png" />
    
    <!-- Start Single Page Apps for GitHub Pages -->
    <script type="text/javascript">
      // Single Page Apps for GitHub Pages
      // MIT License
      // https://github.com/rafgraph/spa-github-pages
      (function(l) {
        if (l.search[1] === '/' ) {
          var decoded = l.search.slice(1).split('&').map(function(s) { 
            return s.replace(/~and~/g, '&')
          }).join('?');
          window.history.replaceState(null, null,
              l.pathname.slice(0, -1) + decoded + l.hash
          );
        }
      }(window.location))
    </script>
    <!-- End Single Page Apps for GitHub Pages -->
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 20px;
        line-height: 1.6;
      }
      .container {
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        border: 1px solid #ddd;
        border-radius: 5px;
      }
      h1 {
        color: #333;
      }
      .error {
        color: red;
        font-weight: bold;
      }
      .success {
        color: green;
        font-weight: bold;
      }
      button {
        padding: 8px 16px;
        background-color: #4CAF50;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        margin-top: 10px;
      }
      button:hover {
        background-color: #45a049;
      }
      .card {
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 16px;
        margin-top: 20px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }
    </style>
    <!-- Load React from CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
  </head>

  <body>
    <div id="root"></div>
    
    <!-- Standalone React Application -->
    <script type="text/babel">
      const { useState, useEffect } = React;
      
      const App = () => {
        const [count, setCount] = useState(0);
        const [properties, setProperties] = useState([
          { id: 1, address: "123 Main St", price: "$350,000", type: "Single Family" },
          { id: 2, address: "456 Oak Ave", price: "$425,000", type: "Townhouse" },
          { id: 3, address: "789 Pine Rd", price: "$550,000", type: "Condo" }
        ]);
        
        useEffect(() => {
          console.log("App mounted");
          document.title = "SmartEstate Link - " + count;
          
          return () => {
            console.log("App unmounted");
          };
        }, [count]);
        
        return (
          <div className="container">
            <h1>SmartEstate Link</h1>
            <p className="success">React application is working correctly!</p>
            
            <div>
              <p>Count: {count}</p>
              <button onClick={() => setCount(count + 1)}>Increment</button>
            </div>
            
            <h2>Properties</h2>
            {properties.map(property => (
              <div key={property.id} className="card">
                <h3>{property.address}</h3>
                <p>Price: {property.price}</p>
                <p>Type: {property.type}</p>
                <button onClick={() => alert(`Viewing details for ${property.address}`)}>
                  View Details
                </button>
              </div>
            ))}
          </div>
        );
      };
      
      try {
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
        console.log('React app rendered successfully');
      } catch (error) {
        console.error('Error rendering React app:', error);
        document.getElementById('root').innerHTML = `
          <div style="color: red; padding: 20px; border: 1px solid #f44336; margin: 20px;">
            <h2>Error Rendering Application</h2>
            <p>${error.message}</p>
            <pre>${error.stack}</pre>
          </div>
        `;
      }
    </script>
  </body>
</html>
